{% extends "pwa_base.html" %}

{% block title %}My Trips | Printellect{% endblock %}

{% block nav_account %}text-white bg-zinc-800{% endblock %}
{% block bnav_account %}active{% endblock %}

{% block header_title %}My Trips{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto">
  
  <!-- Header with Create Button -->
  <div class="flex items-center justify-between mb-6">
    <div>
      <h1 class="text-2xl font-bold">My Trips</h1>
      <p class="text-zinc-400 text-sm mt-1">Private travel itineraries</p>
    </div>
    <a href="/trips/new" class="flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-xl font-medium transition tap-highlight">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
      </svg>
      New Trip
    </a>
  </div>
  
  {% if trips %}
  <div class="space-y-4">
    {% for trip in trips %}
    <a href="/trips/{{ trip.id }}" class="block bg-zinc-900/60 border border-zinc-800 rounded-2xl p-5 hover:border-zinc-700 transition card-interactive tap-highlight">
      <div class="flex items-start justify-between gap-4">
        <div class="flex-1 min-w-0">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-xl">
              {% if 'vegas' in trip.destination|lower or 'las vegas' in trip.destination|lower %}ğŸ°
              {% elif 'beach' in trip.destination|lower or 'hawaii' in trip.destination|lower %}ğŸ–ï¸
              {% elif 'europe' in trip.destination|lower or 'paris' in trip.destination|lower %}ğŸ—¼
              {% elif 'japan' in trip.destination|lower or 'tokyo' in trip.destination|lower %}ğŸ—¾
              {% else %}âœˆï¸{% endif %}
            </span>
            <h2 class="text-lg font-semibold truncate">{{ trip.title }}</h2>
          </div>
          <p class="text-zinc-400 text-sm">{{ trip.destination }}</p>
          <div class="flex items-center gap-3 mt-3 text-xs text-zinc-500">
            <span class="flex items-center gap-1">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
              </svg>
              {{ trip.start_date }} â€” {{ trip.end_date }}
            </span>
            {% if trip.upcoming_count > 0 %}
            <span class="flex items-center gap-1 text-indigo-400">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
              {{ trip.upcoming_count }} upcoming
            </span>
            {% endif %}
          </div>
        </div>
        <div class="flex flex-col items-end gap-2">
          <span class="px-2 py-1 text-xs rounded-lg {% if trip.membership.role.value == 'owner' %}bg-amber-600/20 text-amber-300{% elif trip.membership.role.value == 'editor' %}bg-indigo-600/20 text-indigo-300{% else %}bg-zinc-700/50 text-zinc-400{% endif %}">
            {{ trip.membership.role.value|capitalize }}
          </span>
          <svg class="w-5 h-5 text-zinc-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
          </svg>
        </div>
      </div>
    </a>
    {% endfor %}
  </div>
  {% else %}
  <!-- Empty State -->
  <div class="text-center py-16">
    <div class="w-20 h-20 mx-auto mb-6 bg-zinc-800 rounded-full flex items-center justify-center">
      <span class="text-4xl">âœˆï¸</span>
    </div>
    <h2 class="text-xl font-semibold mb-2">No trips yet</h2>
    <p class="text-zinc-400 mb-6">Create your first trip to start planning your itinerary</p>
    <a href="/trips/new" class="inline-flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-700 rounded-xl font-medium transition">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
      </svg>
      Create Trip
    </a>
  </div>
  {% endif %}
  
  <!-- Back to Account Link -->
  <div class="mt-8 pt-6 border-t border-zinc-800">
    <a href="/auth/profile" class="flex items-center gap-2 text-zinc-400 hover:text-white transition">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
      </svg>
      Back to Account
    </a>
  </div>
  
</div>
{% endblock %}
